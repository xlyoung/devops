<!DOCTYPE html>
<html lang="zh-cn" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>监控</title>
    <link rel="stylesheet" href="../../static/users/mobi.min.css"/>
    {#    加入bootstrap的CSS#}
    <link href="../../static/homepage/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/homepage/css/style.css" rel="stylesheet" type="text/css"/>
    {#    字体css#}
    <link href="../../static/homepage/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    {#    引入query_js#}
    <script src="../../static/inspection/js/jquery-3.3.1.js" type="text/javascript"></script>

    <style>
        .pickListButtons {
            padding: 10px;
            text-align: center;
        }

        .pickListButtons button {
            margin-bottom: 5px;
        }

        .pickListSelect {
            height: 200px !important;
        }
    </style>
</head>

<body class="skin-black">

{#头部的部分#}
<header class="header">
    <a href="index.html" class="logo">
        Devops
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top" role="navigation">
        <!-- Sidebar toggle button-->
        <a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>
    </nav>
</header>

{#主题部分，左边部分#}
<div class="wrapper row-offcanvas row-offcanvas-left">
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="left-side sidebar-offcanvas">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
            {#            <!-- Sidebar user panel -->#}


            {#            头像信息#}
            <div class="user-panel">
                <div class="pull-left image">
                    <img src="../../static/homepage/image/26115.jpg" class="img-circle" alt="User Image"/>
                </div>
                <div class="pull-left info">


                    {% if user.is_authenticated %}
                        <p>Hello, {{ user.username }}</p>
                        {#                        <a href="/"><i class="fa fa-circle text-success"></i> Online</a>#}
                        <a href="{% url 'password_change' %}?next={{ request.path }}"><i
                                class="fa fa-circle text-success"></i> 修改密码</a>
                        <a href="{% url 'logout' %}?next={% url 'homepage:index' %}"><i
                                class="fa fa-circle text-success"></i>
                            注销登录</a>
                    {% else %}
                        <p>你还没有登录，请</p>

                        <a href="{% url 'login' %}?next={{ request.path }}"><i
                                class="fa fa-circle text-success"></i> 登录</a>
                        <a href="{% url 'users:register' %}"><i
                                class="fa fa-circle text-success"></i> 注册</a>

                    {% endif %}

                </div>
            </div>

            <ul class="sidebar-menu">
                <li>
                    <a href={% url 'homepage:index' %}>
                        <i class="fa fa-dashboard"></i> <span>主页</span>
                    </a>
                </li>
                <li>
                    <a href="ansible.html">
                        <i class="fa fa-gavel"></i> <span>巡检</span>
                    </a>
                </li>

                <li>
                    <a href="basic_form.html">
                        <i class="fa fa-globe"></i> <span>监控</span>
                    </a>
                </li>

                <li class="active">
                    <a href="../ansible/ansible.html">
                        <i class="fa fa-glass"></i> <span>ansible</span>
                    </a>
                </li>
            </ul>
        </section>


    </aside>


</div>


{#中间主题内容#}
<aside class="right-side">
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
 						<i class="fa    fa-gears"></i>模块执行
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-6">
                                <legend><i class="fa  fa-paper-plane"></i>Ansible服务器</legend>
                                    <form role="form" id="ansibleModelRun" class="main form-horizontal" >{% csrf_token %}
										<fieldset>
											<div class="form-group" >
													<label class="col-sm-2 control-label">动态主机</label>
													<div class="col-sm-6">
														<select class="form-control" name="server_model" id="server_model" onchange="javascript:oBtAnsibleServerl();">
															<option value="" name="server_model" selected="selected">选择一个类型</option>
															<option value="service" name="server_model">项目类型</option>
															<option value="group" name="server_model">使用部门</option>
															<option value="custom" name="server_model">自定义</option>
														</select>
													</div>
											</div>
											<div id='project_server'  style="display:none;">
												<div class="form-group">
													 <label class="col-sm-2 control-label" >所属项目</label>
													 <div class="col-sm-6">
			                                            <select class="form-control" name="ansible_project"  id="ansible_project" onchange="javascript:oBtProjectSelect();" required>
			                                            	<option name="project" value="" selected="selected">请选择一个项目</option>
			                                            	{% for ds in projectList %}
			                                            		<option name="project" value="{{ds.id}}">{{ds.project_name}}</option>
			                                            	{% endfor %}
			                                            </select>
													 </div>
												</div>
												<div class="form-group">
													 <label class="col-sm-2 control-label" >业务类型</label>
													 <div class="col-sm-6">
			                                            <select class="form-control" name="ansible_service"  id="ansible_service" onchange="javascript:oBtServiceSelect('service','ansible_service');" required>
															<option name="ansible_service" value="" selected="selected">请选择一个应用类型</option>
			                                            </select>
													 </div>
												</div>
											</div>
											<div id="group_server" class="form-group" style="display:none;">
												 <label class="col-sm-2 control-label" >使用部门</label>
												 <div class="col-sm-6">
		                                            <select class="form-control" name="ansible_group"  id="ansible_group" onchange="javascript:oBtServiceSelect('group','ansible_group');" required>
		                                            	<option name="ansible_group" value="" selected="selected">请选择使用组</option>
		                                            	{% for ds in groupList %}
		                                            		<option name="group" value="{{ds.id}}">{{ds.name}}</option>
		                                            	{% endfor %}
		                                            </select>
												 </div>
											</div>
											<div id="custom_server" class="form-group" style="display:none;">
												 <label class="col-sm-2 control-label" >服务器选择</label>
												 <div class="col-sm-6">
		                                            <select multiple class="selectpicker" data-live-search="true" name="ansible_server"  id="ansible_server" required>
		                                            	{% for ds in serverList %}
		                                            		<option name="server" value="{{ds.id}}">{{ds.ip}}</option>
		                                            	{% endfor %}
		                                            </select>
												 </div>
											</div>
		                                    <input  type="hidden"   class="form-control"  name="model" value="model">
		                                    <input  type="hidden"   class="form-control" id="ans_uuid" name="ans_uuid" value="{{ans_uuid}}">
											<div class="form-group" >
													<label class="col-sm-2 control-label">模块类型</label>
													<div class="col-sm-6">
														<select class="form-control" name="ansible_model" id="ansible_model" onchange="javascript:oBtAnsibleModel();">
															<option value="ping" name="ansible_model">ping</option>
															<option value="raw" name="ansible_model">shell</option>
															<option value="yum" name="ansible_model">yum</option>
															<option value="copy" name="ansible_model">copy</option>
															<option value="service" name="ansible_model">service</option>
															<option value="file" name="ansible_model">file</option>
															<option value="user" name="ansible_model">user</option>
															<option value="synchronize" name="ansible_model">sync</option>
															<option value="cron" name="ansible_model">cron</option>
															<option value="get_url" name="ansible_model">wget</option>
															<option value="custom" name="ansible_model">自定义</option>
														</select>
													</div>
											</div>
											<div id="custom_model" class="form-group" style="display:none;">
												 <label class="col-sm-2 control-label">自定义模块</label>
												 <div class="col-sm-6">
													<input id="custom_model" type="text"   class="form-control" placeholder="输入模块" name="custom_model" value="">
												</div>
											</div>
											</fieldset>
											<div class="form-group">
												 <label class="col-sm-2 control-label">模块参数</label>
												 <div class="col-sm-6">
													<input id="ansible_args" type="text"   class="form-control" placeholder="输入模块参数" name="ansible_args" value="">
												</div>
											</div>
											<div class="form-group">
												 <label class="col-sm-2 control-label">Debug</label>
												 <div class="col-sm-6">
														<select class="form-control" name="ansible_debug">
															<option value="off" name="ansible_model">关闭</option>
															<option value="on" name="ansible_model">开启</option>
														</select>
												</div>
											</div>
											</fieldset>
											<legend></legend>
											<div class="form-group">
												<label class="col-sm-3 control-label"></label>
												<button type="button"  onclick="repealFromVaule(this)" class="btn btn-default" >撤销</button>
												{% if perms.OpsManage.can_exec_ansible_model %}
										 			<button type="button"  class="btn btn-default"  id="run_ansible_model" onclick="runAnsibleModel(this)">执行</button>
										 		{% else %}
										 			<button type="button"  class="btn btn-default"  disabled>执行</button>
										 		{% endif %}
									 		</div>
										</form>
                                </div>
                                <!-- /.col-lg-6 (nested) -->
                                <div class="col-lg-6">
                                    <legend><i class="fa  fa-paper-plane-o"></i>执行结果</legend>
									<pre>
				                        <div id="result">
				                        </div>
				                    </pre>
                                <!-- /.col-lg-6 (nested) -->
                            </div>
                            <!-- /.row (nested) -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
</div>

</aside>


{#结尾#}
<footer class="footer navbar-fixed-bottom ">
    {#<div class="footer-main">#}
    <div class="container">
        <a>公司名称，年份 </a>
        {#</div>#}
    </div>
</footer>

</body>


</html>